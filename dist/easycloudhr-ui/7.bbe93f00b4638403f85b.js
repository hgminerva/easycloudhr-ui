(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{SuQF:function(t,e,n){"use strict";n.r(e),n.d(e,"SecurityModule",(function(){return k}));var o=n("ofXK"),i=n("3Pt+"),s=n("tyNb"),a=n("fXoL");let r=(()=>{class t{constructor(t){this.router=t}canActivate(){return null==localStorage.getItem("access_token")||(this.router.navigate(["/software/dashboard"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(a.Zb(s.b))},t.\u0275prov=a.Mb({token:t,factory:t.\u0275fac}),t})(),l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["app-security"]],decls:1,vars:0,template:function(t,e){1&t&&a.Rb(0,"router-outlet")},directives:[s.f],styles:[""]}),t})();var c=n("mrSG"),b=n("tk/3"),d=n("XNiG"),g=n("24n0");let u=(()=>{class t{constructor(t,e){this.appSettings=t,this.httpClient=e,this.loginSubject=new d.a,this.loginObservable=this.loginSubject.asObservable()}login(t){this.httpClient.post(this.appSettings.defaultAPIURLHost+"/Token","username="+t.UserName+"&password="+t.Password+"&grant_type=password",this.appSettings.URLEncodedOptions).subscribe(t=>{localStorage.setItem("access_token",t.access_token),localStorage.setItem("expires_in",t.expires_in),localStorage.setItem("token_type",t.token_type),localStorage.setItem("username",t.userName),this.getUserRights(t.userName),this.loginSubject.next([!0,"Login Successful."])},t=>{this.loginSubject.next([!1,t.error.error_description])})}getUserRights(t){return Object(c.a)(this,void 0,void 0,(function*(){let e=this.appSettings.defaultAPIURLHost,n={headers:new b.c({"Content-Type":"application/json",Authorization:"Bearer "+(yield localStorage.getItem("access_token"))})},o=new Array;yield this.httpClient.get(e+"/api/user/module/user/rights/list/"+t,n).subscribe(t=>{var e=t;if(e.length>0){for(var n=0;n<=e.length-1;n++)o.push({Id:e[n].Id,UserId:e[n].UserId,ModuleId:e[n].ModuleId,Module:e[n].Module,CanAdd:e[n].CanAdd,CanEdit:e[n].CanEdit,CanDelete:e[n].CanDelete,CanLock:e[n].CanLock,CanUnlock:e[n].CanUnlock,CanCancel:e[n].CanCancel,CanPrint:e[n].CanPrint});localStorage.setItem("userRights",JSON.stringify(o))}})}))}}return t.\u0275fac=function(e){return new(e||t)(a.Zb(g.a),a.Zb(b.a))},t.\u0275prov=a.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=n("dNgK"),h=n("/t3+"),m=n("XiUz"),f=n("Wp6s"),y=n("kmnG"),U=n("qFsG"),v=n("NFeN"),S=n("bTqV");const x=function(){return{standalone:!0}},w=[{path:"",canActivate:[r],component:l,children:[{path:"",canActivate:[r],component:l},{path:"login",canActivate:[r],component:(()=>{class t{constructor(t,e,n,o){this.loginService=t,this.router=e,this.appSettings=n,this.snackBar=o,this.loginModel={UserName:"",Password:""},this.loginDisabled=!1}login(){this.loginDisabled=!0,""===this.loginModel.UserName||""===this.loginModel.Password||(this.loginService.login(this.loginModel),this.loginSubscribe=this.loginService.loginObservable.subscribe(t=>{t[0]?(this.appSettings.snackBarSuccess(this.snackBar,"Login Successful"),setTimeout(()=>{this.router.navigate(["/software"])},500)):(this.appSettings.snackBarError(this.snackBar,t[1]),this.loginDisabled=!1),null!=this.loginSubscribe&&this.loginSubscribe.unsubscribe()}))}ngOnInit(){}ngOnDestroy(){null!=this.loginSubscribe&&this.loginSubscribe.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(u),a.Qb(s.b),a.Qb(g.a),a.Qb(p.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-login"]],decls:47,vars:11,consts:[[1,"toolbar-fixed-top"],["routerLink","/landing"],["src","../../../assets/hrlogo.png","height","40",2,"margin-top","7px"],[1,"toolbar-spacer"],[1,"login-container"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","30",2,"margin","5px"],["fxFlex","40",2,"margin","5px"],[2,"text-align","center","width","100%"],[3,"ngSubmit"],[2,"padding","20px"],["appearance","outline",2,"width","100%"],["matInput","","maxlength","100","placeholder","Enter your username",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["text_username",""],["matSuffix",""],["align","end"],["type","password","matInput","","maxlength","100","placeholder","Enter your password",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["text_password",""],["type","submit","mat-flat-button","","id","buttonLogin","color","primary",2,"width","100%","padding-top","10px","padding-bottom","10px",3,"disabled"],[2,"width","100%","text-align","center"],[2,"margin-top","5px","margin-bottom","20px","font-size","17px"]],template:function(t,e){if(1&t&&(a.Vb(0,"mat-toolbar",0),a.Vb(1,"a",1),a.Rb(2,"img",2),a.Ub(),a.Rb(3,"span",3),a.Ub(),a.Rb(4,"br"),a.Rb(5,"br"),a.Vb(6,"div",4),a.Vb(7,"div",5),a.Rb(8,"div",6),a.Vb(9,"div",7),a.Vb(10,"mat-card"),a.Vb(11,"mat-card-content"),a.Vb(12,"div",8),a.Vb(13,"h1"),a.yc(14,"Login"),a.Ub(),a.Ub(),a.Vb(15,"form",9),a.dc("ngSubmit",(function(){return e.login()})),a.Vb(16,"div",10),a.Vb(17,"mat-form-field",11),a.Vb(18,"mat-label"),a.yc(19,"Username"),a.Ub(),a.Vb(20,"input",12,13),a.dc("ngModelChange",(function(t){return e.loginModel.UserName=t})),a.Ub(),a.Vb(22,"mat-icon",14),a.yc(23,"vpn_key"),a.Ub(),a.Vb(24,"mat-hint",15),a.yc(25),a.Ub(),a.Ub(),a.Vb(26,"mat-form-field",11),a.Vb(27,"mat-label"),a.yc(28,"Password"),a.Ub(),a.Vb(29,"input",16,17),a.dc("ngModelChange",(function(t){return e.loginModel.Password=t})),a.Ub(),a.Vb(31,"mat-icon",14),a.yc(32,"security"),a.Ub(),a.Vb(33,"mat-hint",15),a.yc(34),a.Ub(),a.Ub(),a.Rb(35,"br"),a.Rb(36,"br"),a.Vb(37,"button",18),a.yc(38," LOGIN "),a.Ub(),a.Rb(39,"br"),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Rb(40,"br"),a.Vb(41,"div",19),a.Vb(42,"p",20),a.yc(43," \xa9 2020 "),a.Vb(44,"b"),a.yc(45,"easycloudhr.com"),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Rb(46,"div",6),a.Ub(),a.Ub()),2&t){const t=a.qc(21),n=a.qc(30);a.Eb(20),a.kc("ngModel",e.loginModel.UserName)("ngModelOptions",a.mc(9,x))("disabled",e.loginDisabled),a.Eb(5),a.Ac("",t.value.length," / 100"),a.Eb(4),a.kc("ngModel",e.loginModel.Password)("ngModelOptions",a.mc(10,x))("disabled",e.loginDisabled),a.Eb(5),a.Ac("",n.value.length," / 100"),a.Eb(3),a.kc("disabled",e.loginDisabled)}},directives:[h.a,s.d,m.b,m.a,f.a,f.b,i.v,i.o,i.p,y.c,y.g,U.b,i.c,i.j,i.n,i.q,v.a,y.h,y.f,S.a],styles:[".login-container[_ngcontent-%COMP%]{margin-top:100px}.toolbar-fixed-top[_ngcontent-%COMP%]{position:fixed;top:0;z-index:1000;border-bottom:5px solid #742774}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})()}]}];let M=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(w)],s.e]}),t})();var C=n("YUcS");let k=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},providers:[r],imports:[[o.b,i.i,i.s,M,h.b,v.b,S.b,f.c,U.c,y.e,p.b,C.a]]}),t})()}}]);